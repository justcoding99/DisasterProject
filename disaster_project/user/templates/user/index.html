{% extends "./base.html" %}
{% load crispy_forms_tags %}

{% block content %}
  <style>
    /* Style the button */
    button {
      background-color: #4CAF50;
      border: none;
      color: white;
      padding: 15px 32px;
      text-align: center;
      text-decoration: none;
      display: inline-block;
      font-size: 16px;
      margin: 20px;
      cursor: pointer;
    }

    /* Style the button when it is hovered over */
    button:hover {
      background-color: #3e8e41;
    }
  </style>
  <button id="myButton">Click me for a high-pitched sound!</button>



  <script>
  const audioContext = new AudioContext();

// When the button is clicked, generate a high-pitched tone
document.getElementById("myButton").addEventListener("click", function() {
  // Create a new sine wave oscillator
  const oscillator = audioContext.createOscillator();
  oscillator.type = "sine";
  oscillator.frequency.value = 2000; // Set the frequency to 2000 Hz (a high-pitched tone)

  // Connect the oscillator to the audio context and start it
  oscillator.connect(audioContext.destination);
  oscillator.start();

  // Stop the oscillator after 1 second
  setTimeout(function() {
    oscillator.stop();
  }, 1000);
});
  </script>


  <title>Emergency Button Example</title>
  <style>
    #emergency-button {
      background-color: red;
      color: white;
      border: none;
      padding: 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 18px;
    }
    #emergency-number {
      display: none;
      background-color: #f2f2f2;
      padding: 10px;
      border-radius: 5px;
      margin-top: 10px;
      font-size: 16px;
    }
  </style>

<body>
  <button id="emergency-button" onclick="toggleEmergencyNumber()">Emergency Number</button>
  <div id="emergency-number">
    <p><strong>Emergency Phone Number:</strong> 911</p>
  </div>

  <script>
    function toggleEmergencyNumber() {
      var emergencyNumber = document.getElementById("emergency-number");
      if (emergencyNumber.style.display === "none") {
        emergencyNumber.style.display = "block";
      } else {
        emergencyNumber.style.display = "none";
      }
    }
  </script>
</body>

<div class="container mt-5">



    <div class="content-section col-md-8 col-md-offset-2">
        <form method="POST">
            <input type="hidden" name="csrfmiddlewaretoken" value="Z9Ei8pREbpzzkP2UihkqObOpsRhX45FVRkUIoT8l44rjVSfMPe2OaJSIX1Z7QHHk">


<div id="div_id_name" class="mb-3"> <label for="id_name" class="form-label requiredField">
                Name<span class="asteriskField">*</span> </label> <input type="text" name="name" class="textinput form-control" required id="id_name"> </div> <div id="div_id_phone" class="mb-3"> <label for="id_phone" class="form-label requiredField">
                Phone<span class="asteriskField">*</span> </label> <input type="text" name="phone" maxlength="30" class="textinput form-control" required id="id_phone"> </div> <div id="div_id_address" class="mb-3"> <label for="id_address" class="form-label">
                Address
            </label> <input type="text" name="address" class="textinput form-control" id="id_address"> </div> <input type="hidden" name="lat" value="0" id="id_lat"> <input type="hidden" name="lon" value="0" id="id_lon">

            <div id="demo">

            </div>
            <button type="button" onclick="getLocation()" class="btn btn-secondary">Locate me</button>

            <button class="btn btn-primary" type="submit" id="submit">Submit</button>

        </form>

    </div>
    <script>

        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition);
            }
        }

        function showPosition(position) {
            let lat = position.coords.latitude;
            let lon = position.coords.longitude;
            let lat_field = document.getElementById("id_lat");
            let lon_field = document.getElementById("id_lon");
            let address_field = document.getElementById("id_address");
            lat_field.value = lat;
            lon_field.value = lon;

            fetch("https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat=" + lat + "&lon=" + lon)
                .then((response) => response.json())
                .then((data) => {
                    address_field.value = data.display_name;
                    console.log(data)
                });
        }

    </script>

</div>
{% endblock content %}
